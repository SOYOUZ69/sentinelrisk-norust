import{a as le,b as ce}from"./chunk-ETLF7AXS.js";import{a as G,b as Xt,d as te,e as ee}from"./chunk-R3ERDSFW.js";import{d as Kt}from"./chunk-BM6JOVDS.js";import{c as Rt,e as Zt}from"./chunk-4PQ7QBTL.js";import{a as v,b as C,c as b,d as ut,e as gt,f as M,h as ft}from"./chunk-MPB4WSS5.js";import{a as At,b as It,c as Ot,d as Ft,e as wt,f as Tt,g as Dt,h as Vt,i as Lt,j as kt,l as Nt,n as W,o as ne,p as ie,q as ae,s as oe,t as re,u as se,v as me}from"./chunk-NPMEEAYW.js";import{a as $t,b as zt,d as Bt,f as Ht,g as Ut,h as jt,i as qt,k as Yt,l as Jt}from"./chunk-ZR4OZC73.js";import{A as xt,B as St,F as yt,H as Pt,ha as Gt,ia as Wt,ja as E,ka as Qt,p as vt,r as p,t as Ct,u as bt,y as Mt,z as Et}from"./chunk-LQ6MDXSH.js";import{a as R,b as ht}from"./chunk-DEA6IKFQ.js";import{$ as _,$a as h,Fa as d,Ha as l,Lb as q,Mb as k,Pc as mt,Qa as i,Ra as n,Sa as u,T as it,Ta as w,Tb as ot,U as V,Ua as T,Uc as J,W as at,Wa as H,Xb as U,Yb as rt,Yc as lt,Za as S,aa as L,da as O,ea as F,fc as st,g as nt,gc as N,gd as ct,hb as a,ib as g,ic as Y,jb as f,md as y,od as dt,pd as pt,qd as _t,ta as s,ua as x}from"./chunk-KODBDAN5.js";var de=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=V({imports:[mt,J,J]})}}return e})();var P=function(e){return e.SERVER="SERVER",e.PC="PC",e.SWITCH="SWITCH",e.ROUTER="ROUTER",e.PRINTER="PRINTER",e.FIREWALL="FIREWALL",e.OTHER="OTHER",e}(P||{}),I=function(e){return e.V1="V1",e.V2C="V2C",e.V3="V3",e}(I||{});var $=(()=>{class e{constructor(t){this.http=t,this.baseUrl=`${_t.apiUrl}/api/snmp`}getAllAssets(){return this.http.get(`${this.baseUrl}/assets`)}getAssetById(t){return this.http.get(`${this.baseUrl}/assets/${t}`)}getActiveAssets(){return this.http.get(`${this.baseUrl}/assets/active`)}getAssetsByType(t){return this.http.get(`${this.baseUrl}/assets/type/${t}`)}createAsset(t){return this.http.post(`${this.baseUrl}/assets`,t)}updateAsset(t,r){return this.http.put(`${this.baseUrl}/assets/${t}`,r)}deleteAsset(t){return this.http.delete(`${this.baseUrl}/assets/${t}`)}toggleAssetStatus(t){return this.http.patch(`${this.baseUrl}/assets/${t}/toggle-status`,{})}getAssetStatistics(){return this.http.get(`${this.baseUrl}/assets/statistics/by-type`)}getAllConfigs(){return this.http.get(`${this.baseUrl}/configs`)}getConfigById(t){return this.http.get(`${this.baseUrl}/configs/${t}`)}getActiveConfigs(){return this.http.get(`${this.baseUrl}/configs/active`)}getConfigsByAsset(t){return this.http.get(`${this.baseUrl}/configs/asset/${t}`)}createConfig(t){return this.http.post(`${this.baseUrl}/configs`,t)}updateConfig(t,r){return this.http.put(`${this.baseUrl}/configs/${t}`,r)}deleteConfig(t){return this.http.delete(`${this.baseUrl}/configs/${t}`)}runManualScan(t){return this.http.post(`${this.baseUrl}/configs/${t}/run`,{})}toggleConfigStatus(t){return this.http.patch(`${this.baseUrl}/configs/${t}/toggle-status`,{})}getAllResults(t=0,r=20){let o=new U().set("page",t.toString()).set("size",r.toString());return this.http.get(`${this.baseUrl}/results`,{params:o})}getResultById(t){return this.http.get(`${this.baseUrl}/results/${t}`)}getResultsByAsset(t,r=0,o=20){let c=new U().set("page",r.toString()).set("size",o.toString());return this.http.get(`${this.baseUrl}/results/asset/${t}`,{params:c})}getResultsByConfig(t,r=0,o=20){let c=new U().set("page",r.toString()).set("size",o.toString());return this.http.get(`${this.baseUrl}/results/config/${t}`,{params:c})}getResultsByStatus(t,r=0,o=20){let c=new U().set("page",r.toString()).set("size",o.toString());return this.http.get(`${this.baseUrl}/results/status/${t}`,{params:c})}getLatestResultByAsset(t){return this.http.get(`${this.baseUrl}/results/latest/asset/${t}`)}getLatestResultByConfig(t){return this.http.get(`${this.baseUrl}/results/latest/config/${t}`)}getSuccessRate(){return this.http.get(`${this.baseUrl}/results/statistics/success-rate`)}getResultStatistics(){return this.http.get(`${this.baseUrl}/results/statistics/by-status`)}testConnection(t){return this.http.post(`${this.baseUrl}/assets/test-connection`,t)}static{this.\u0275fac=function(r){return new(r||e)(at(rt))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ee(e,m){e&1&&(i(0,"div",6),u(1,"mat-spinner"),i(2,"p"),a(3,"Chargement des assets..."),n()())}function xe(e,m){if(e&1){let t=H();i(0,"div",7)(1,"mat-icon"),a(2,"devices_off"),n(),i(3,"h3"),a(4,"Aucun asset configur\xE9"),n(),i(5,"p"),a(6,"Commencez par ajouter votre premier asset SNMP"),n(),i(7,"button",2),S("click",function(){O(t);let o=h();return F(o.createAsset())}),i(8,"mat-icon"),a(9,"add"),n(),a(10," Ajouter un asset "),n()()}}function Se(e,m){e&1&&(i(0,"th",20),a(1,"Hostname"),n())}function ye(e,m){if(e&1&&(i(0,"td",21),a(1),n()),e&2){let t=m.$implicit;s(),f(" ",t.hostname||"-"," ")}}function Pe(e,m){e&1&&(i(0,"th",20),a(1,"Adresse IP"),n())}function Ae(e,m){if(e&1&&(i(0,"td",21),a(1),n()),e&2){let t=m.$implicit;s(),f(" ",t.ipAddress||"-"," ")}}function Ie(e,m){e&1&&(i(0,"th",20),a(1,"Type"),n())}function Oe(e,m){if(e&1&&(i(0,"td",21)(1,"mat-chip",22),a(2),n()()),e&2){let t=m.$implicit,r=h(2);s(),l("color","primary"),s(),f(" ",r.getAssetTypeLabel(t.type)," ")}}function Fe(e,m){e&1&&(i(0,"th",20),a(1,"Version SNMP"),n())}function we(e,m){if(e&1&&(i(0,"td",21)(1,"mat-chip",22),a(2),n()()),e&2){let t=m.$implicit;s(),l("color",t.snmpVersion==="V3"?"accent":"warn"),s(),f(" ",t.snmpVersion," ")}}function Te(e,m){e&1&&(i(0,"th",20),a(1,"Statut"),n())}function De(e,m){if(e&1&&(i(0,"td",21)(1,"mat-chip",22),a(2),n()()),e&2){let t=m.$implicit;s(),l("color",t.active?"primary":"warn"),s(),f(" ",t.active?"Actif":"Inactif"," ")}}function Ve(e,m){e&1&&(i(0,"th",20),a(1,"Actions"),n())}function Le(e,m){if(e&1){let t=H();i(0,"td",21)(1,"button",23),S("click",function(){let o=O(t).$implicit,c=h(2);return F(c.toggleAssetStatus(o))}),i(2,"mat-icon"),a(3),n()(),i(4,"button",24),S("click",function(){let o=O(t).$implicit,c=h(2);return F(c.editAsset(o))}),i(5,"mat-icon"),a(6,"edit"),n()(),i(7,"button",25),S("click",function(){let o=O(t).$implicit,c=h(2);return F(c.deleteAsset(o))}),i(8,"mat-icon"),a(9,"delete"),n()()()}if(e&2){let t=m.$implicit;s(),l("color",t.active?"warn":"primary")("matTooltip",t.active?"D\xE9sactiver":"Activer"),s(2),g(t.active?"pause":"play_arrow")}}function ke(e,m){e&1&&u(0,"tr",26)}function Ne(e,m){e&1&&u(0,"tr",27)}function Re(e,m){if(e&1&&(i(0,"div",8)(1,"table",9),w(2,10),d(3,Se,2,0,"th",11)(4,ye,2,1,"td",12),T(),w(5,13),d(6,Pe,2,0,"th",11)(7,Ae,2,1,"td",12),T(),w(8,14),d(9,Ie,2,0,"th",11)(10,Oe,3,2,"td",12),T(),w(11,15),d(12,Fe,2,0,"th",11)(13,we,3,2,"td",12),T(),w(14,16),d(15,Te,2,0,"th",11)(16,De,3,2,"td",12),T(),w(17,17),d(18,Ve,2,0,"th",11)(19,Le,10,3,"td",12),T(),d(20,ke,1,0,"tr",18)(21,Ne,1,0,"tr",19),n()()),e&2){let t=h();s(),l("dataSource",t.assets),s(19),l("matHeaderRowDef",t.displayedColumns),s(),l("matRowDefColumns",t.displayedColumns)}}var fe=(()=>{class e{constructor(t,r,o){this.snmpService=t,this.router=r,this.snackBar=o,this.assets=[],this.loading=!1,this.displayedColumns=["hostname","ipAddress","type","snmpVersion","active","actions"]}ngOnInit(){this.loadAssets()}loadAssets(){this.loading=!0,this.snmpService.getAllAssets().subscribe({next:t=>{this.assets=t,this.loading=!1},error:t=>{console.error("Erreur lors du chargement des assets:",t),this.snackBar.open("Erreur lors du chargement des assets","Fermer",{duration:3e3}),this.loading=!1}})}createAsset(){this.router.navigate(["/snmp/assets/new"])}editAsset(t){this.router.navigate(["/snmp/assets/edit",t.id])}toggleAssetStatus(t){t.id&&this.snmpService.toggleAssetStatus(t.id).subscribe({next:r=>{let o=this.assets.findIndex(c=>c.id===r.id);o!==-1&&(this.assets[o]=r),this.snackBar.open(`Asset ${r.active?"activ\xE9":"d\xE9sactiv\xE9"}`,"Fermer",{duration:3e3})},error:r=>{console.error("Erreur lors du changement de statut:",r),this.snackBar.open("Erreur lors du changement de statut","Fermer",{duration:3e3})}})}deleteAsset(t){t.id&&confirm(`\xCAtes-vous s\xFBr de vouloir supprimer l'asset ${t.hostname||t.ipAddress} ?`)&&this.snmpService.deleteAsset(t.id).subscribe({next:()=>{this.assets=this.assets.filter(r=>r.id!==t.id),this.snackBar.open("Asset supprim\xE9 avec succ\xE8s","Fermer",{duration:3e3})},error:r=>{console.error("Erreur lors de la suppression:",r),this.snackBar.open("Erreur lors de la suppression","Fermer",{duration:3e3})}})}getAssetTypeLabel(t){return{[P.SERVER]:"Serveur",[P.PC]:"PC",[P.SWITCH]:"Switch",[P.ROUTER]:"Routeur",[P.PRINTER]:"Imprimante",[P.FIREWALL]:"Firewall",[P.OTHER]:"Autre"}[t]||t}static{this.\u0275fac=function(r){return new(r||e)(x($),x(st),x(W))}}static{this.\u0275cmp=_({type:e,selectors:[["app-asset-list"]],decls:16,vars:3,consts:[[1,"asset-list-container"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading-container"],[1,"empty-state"],[1,"table-container"],["mat-table","",1,"assets-table",3,"dataSource"],["matColumnDef","hostname"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ipAddress"],["matColumnDef","type"],["matColumnDef","snmpVersion"],["matColumnDef","active"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-icon-button","",3,"click","color","matTooltip"],["mat-icon-button","","color","primary","matTooltip","Modifier",3,"click"],["mat-icon-button","","color","warn","matTooltip","Supprimer",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,o){r&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),a(5,"devices"),n(),a(6," Assets SNMP "),n(),i(7,"div",1)(8,"button",2),S("click",function(){return o.createAsset()}),i(9,"mat-icon"),a(10,"add"),n(),a(11," Nouvel Asset "),n()()(),i(12,"mat-card-content"),d(13,Ee,4,0,"div",3)(14,xe,11,0,"div",4)(15,Re,22,3,"div",5),n()()()),r&2&&(s(13),l("ngIf",o.loading),s(),l("ngIf",!o.loading&&o.assets.length===0),s(),l("ngIf",!o.loading&&o.assets.length>0))},dependencies:[k,At,Ot,Dt,Ft,It,Vt,wt,Tt,Lt,kt,y,dt,E,v,b,M,C,G,R,Gt]})}}return e})();function $e(e,m){if(e&1&&(i(0,"mat-option",25),a(1),n()),e&2){let t=m.$implicit;l("value",t),s(),f(" ",t," ")}}function ze(e,m){if(e&1&&(i(0,"mat-option",25),a(1),n()),e&2){let t=m.$implicit;l("value",t),s(),f(" ",t," ")}}function Be(e,m){if(e&1&&(i(0,"div",26)(1,"div",4)(2,"mat-form-field",5)(3,"mat-label"),a(4,"Community String"),n(),u(5,"input",27),i(6,"mat-icon",28),a(7,"security"),n(),i(8,"mat-error"),a(9),n()()()()),e&2){let t=h();s(9),g(t.getErrorMessage("community"))}}function He(e,m){if(e&1&&(i(0,"mat-option",25),a(1),n()),e&2){let t=m.$implicit;l("value",t),s(),f(" ",t," ")}}function Ue(e,m){if(e&1&&(i(0,"mat-form-field",8)(1,"mat-label"),a(2,"Mot de passe d'authentification"),n(),u(3,"input",35),i(4,"mat-icon",28),a(5,"lock"),n(),i(6,"mat-error"),a(7),n()()),e&2){let t=h(2);s(7),g(t.getErrorMessage("authPassword"))}}function je(e,m){if(e&1&&(i(0,"mat-option",25),a(1),n()),e&2){let t=m.$implicit;l("value",t),s(),f(" ",t," ")}}function qe(e,m){if(e&1&&(i(0,"mat-form-field",8)(1,"mat-label"),a(2,"Mot de passe de chiffrement"),n(),u(3,"input",36),i(4,"mat-icon",28),a(5,"enhanced_encryption"),n(),i(6,"mat-error"),a(7),n()()),e&2){let t=h(2);s(7),g(t.getErrorMessage("privPassword"))}}function Ge(e,m){if(e&1){let t=H();i(0,"div",29)(1,"div",4)(2,"mat-form-field",5)(3,"mat-label"),a(4,"Nom d'utilisateur SNMP v3"),n(),u(5,"input",30),i(6,"mat-icon",28),a(7,"person"),n(),i(8,"mat-error"),a(9),n()()(),i(10,"div",4)(11,"mat-form-field",8)(12,"mat-label"),a(13,"Protocole d'authentification"),n(),i(14,"mat-select",31),S("selectionChange",function(){O(t);let o=h();return F(o.onAuthProtocolChange())}),i(15,"mat-option",32),a(16,"Aucun"),n(),d(17,He,2,2,"mat-option",10),n(),i(18,"mat-error"),a(19),n()(),d(20,Ue,8,1,"mat-form-field",33),n(),i(21,"div",4)(22,"mat-form-field",8)(23,"mat-label"),a(24,"Protocole de chiffrement"),n(),i(25,"mat-select",34),S("selectionChange",function(){O(t);let o=h();return F(o.onPrivProtocolChange())}),i(26,"mat-option",32),a(27,"Aucun"),n(),d(28,je,2,2,"mat-option",10),n(),i(29,"mat-error"),a(30),n()(),d(31,qe,8,1,"mat-form-field",33),n()()}if(e&2){let t,r,o=h();s(9),g(o.getErrorMessage("username")),s(8),l("ngForOf",o.authProtocols),s(2),g(o.getErrorMessage("authProtocol")),s(),l("ngIf",(t=o.assetForm.get("authProtocol"))==null?null:t.value),s(8),l("ngForOf",o.privProtocols),s(2),g(o.getErrorMessage("privProtocol")),s(),l("ngIf",(r=o.assetForm.get("privProtocol"))==null?null:r.value)}}function We(e,m){e&1&&(i(0,"mat-error",37),a(1," Au moins un hostname ou une adresse IP doit \xEAtre sp\xE9cifi\xE9 "),n())}function Ze(e,m){e&1&&(i(0,"mat-icon"),a(1,"wifi_tethering"),n())}function Ye(e,m){e&1&&u(0,"mat-spinner",38)}function Je(e,m){if(e&1&&(i(0,"mat-icon"),a(1),n()),e&2){let t=h();s(),g(t.isEditMode?"save":"add")}}function Ke(e,m){e&1&&u(0,"mat-spinner",38)}var X=(()=>{class e{constructor(t,r,o,c,D){this.fb=t,this.snmpService=r,this.snackBar=o,this.dialogRef=c,this.data=D,this.isEditMode=!1,this.isLoading=!1,this.isTestingConnection=!1,this.assetTypes=Object.values(P),this.snmpVersions=Object.values(I),this.authProtocols=["MD5","SHA","SHA224","SHA256","SHA384","SHA512"],this.privProtocols=["DES","3DES","AES128","AES192","AES256"],this.isEditMode=!!D?.asset,this.createForm()}ngOnInit(){this.isEditMode&&this.data.asset&&this.populateForm(this.data.asset),this.assetForm.get("snmpVersion")?.valueChanges.subscribe(t=>{this.updateValidatorsForSnmpVersion(t)})}createForm(){this.assetForm=this.fb.group({hostname:["",[this.hostnameValidator]],ipAddress:["",[this.ipAddressValidator]],type:["",[p.required]],snmpVersion:["",[p.required]],port:[161,[p.required,p.min(1),p.max(65535)]],community:[""],username:[""],authProtocol:[""],authPassword:[""],privProtocol:[""],privPassword:[""],description:["",[p.maxLength(500)]],active:[!0]},{validators:[this.hostnameOrIpValidator]})}populateForm(t){this.assetForm.patchValue({hostname:t.hostname,ipAddress:t.ipAddress,type:t.type,snmpVersion:t.snmpVersion,port:t.port,community:t.community,username:t.username,authProtocol:t.authProtocol,authPassword:t.authPassword,privProtocol:t.privProtocol,privPassword:t.privPassword,active:t.active})}updateValidatorsForSnmpVersion(t){let r=this.assetForm.get("community"),o=this.assetForm.get("snmpV3User"),c=this.assetForm.get("authProtocol"),D=this.assetForm.get("authPass"),et=this.assetForm.get("privProtocol"),Z=this.assetForm.get("privPass");r?.clearValidators(),o?.clearValidators(),c?.clearValidators(),D?.clearValidators(),et?.clearValidators(),Z?.clearValidators(),t===I.V1||t===I.V2C?r?.setValidators([p.required,p.maxLength(100)]):t===I.V3&&(o?.setValidators([p.required,p.maxLength(50)]),this.assetForm.get("authProtocol")?.value&&D?.setValidators([p.required,p.minLength(8),p.maxLength(100)]),this.assetForm.get("privProtocol")?.value&&Z?.setValidators([p.required,p.minLength(8),p.maxLength(100)])),r?.updateValueAndValidity(),o?.updateValueAndValidity(),c?.updateValueAndValidity(),D?.updateValueAndValidity(),et?.updateValueAndValidity(),Z?.updateValueAndValidity()}hostnameValidator(t){return t.value?/^[a-zA-Z0-9.-]+$/.test(t.value)?t.value.length>255?{maxlength:!0}:null:{invalidHostname:!0}:null}ipAddressValidator(t){return t.value?/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t.value)?null:{invalidIpAddress:!0}:null}hostnameOrIpValidator(t){let r=t.get("hostname")?.value,o=t.get("ipAddress")?.value;return!r&&!o?{hostnameOrIpRequired:!0}:null}onAuthProtocolChange(){let t=this.assetForm.get("authProtocol")?.value,r=this.assetForm.get("authPass");t?r?.setValidators([p.required,p.minLength(8),p.maxLength(100)]):(r?.clearValidators(),r?.setValue("")),r?.updateValueAndValidity()}onPrivProtocolChange(){let t=this.assetForm.get("privProtocol")?.value,r=this.assetForm.get("privPass");t?r?.setValidators([p.required,p.minLength(8),p.maxLength(100)]):(r?.clearValidators(),r?.setValue("")),r?.updateValueAndValidity()}testConnection(){return nt(this,null,function*(){if(this.assetForm.invalid){this.snackBar.open("Veuillez corriger les erreurs du formulaire avant de tester la connexion","Fermer",{duration:5e3,panelClass:["error-snackbar"]});return}this.isTestingConnection=!0;try{let t=this.assetForm.value,r=yield this.snmpService.testConnection(t).toPromise();r?.success?this.snackBar.open("\u2705 Connexion SNMP r\xE9ussie !","Fermer",{duration:3e3,panelClass:["success-snackbar"]}):this.snackBar.open(`\u274C \xC9chec de la connexion : ${r?.error||"Erreur inconnue"}`,"Fermer",{duration:5e3,panelClass:["error-snackbar"]})}catch{this.snackBar.open("\u274C Erreur lors du test de connexion","Fermer",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.isTestingConnection=!1}})}onSubmit(){if(this.assetForm.invalid){this.markFormGroupTouched();return}this.isLoading=!0;let t=this.assetForm.value;(this.isEditMode?this.snmpService.updateAsset(this.data.asset.id,t):this.snmpService.createAsset(t)).subscribe({next:o=>{let c=this.isEditMode?"Asset mis \xE0 jour avec succ\xE8s":"Asset cr\xE9\xE9 avec succ\xE8s";this.snackBar.open(c,"Fermer",{duration:3e3,panelClass:["success-snackbar"]}),this.dialogRef.close(o)},error:o=>{console.error("Erreur lors de la sauvegarde:",o),this.snackBar.open("Erreur lors de la sauvegarde de l'asset","Fermer",{duration:5e3,panelClass:["error-snackbar"]}),this.isLoading=!1}})}onCancel(){this.dialogRef.close()}markFormGroupTouched(){Object.keys(this.assetForm.controls).forEach(t=>{this.assetForm.get(t)?.markAsTouched()})}getErrorMessage(t){let r=this.assetForm.get(t);if(!r||!r.errors||!r.touched)return"";let o=r.errors;return o.required?`${this.getFieldDisplayName(t)} est obligatoire`:o.minlength?`${this.getFieldDisplayName(t)} doit contenir au moins ${o.minlength.requiredLength} caract\xE8res`:o.maxlength?`${this.getFieldDisplayName(t)} ne peut pas d\xE9passer ${o.maxlength.requiredLength} caract\xE8res`:o.min?`${this.getFieldDisplayName(t)} doit \xEAtre sup\xE9rieur \xE0 ${o.min.min}`:o.max?`${this.getFieldDisplayName(t)} doit \xEAtre inf\xE9rieur \xE0 ${o.max.max}`:o.invalidHostname?"Le hostname ne peut contenir que des lettres, chiffres, points et tirets":o.invalidIpAddress?"L'adresse IP doit \xEAtre au format IPv4 valide":o.hostnameOrIpRequired?"Au moins un hostname ou une adresse IP doit \xEAtre sp\xE9cifi\xE9":"Champ invalide"}getFieldDisplayName(t){return{hostname:"Hostname",ipAddress:"Adresse IP",type:"Type d'asset",snmpVersion:"Version SNMP",port:"Port",community:"Community",snmpV3User:"Utilisateur SNMP v3",authProtocol:"Protocole d'authentification",authPass:"Mot de passe d'authentification",privProtocol:"Protocole de chiffrement",privPass:"Mot de passe de chiffrement",description:"Description"}[t]||t}get isSnmpV3(){return this.assetForm.get("snmpVersion")?.value===I.V3}get isSnmpV1OrV2C(){let t=this.assetForm.get("snmpVersion")?.value;return t===I.V1||t===I.V2C}static{this.\u0275fac=function(r){return new(r||e)(x(yt),x($),x(W),x(ie),x(ae))}}static{this.\u0275cmp=_({type:e,selectors:[["app-asset-form"]],decls:76,vars:22,consts:[[1,"asset-form-container"],["mat-dialog-title",""],[1,"asset-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","hostname","placeholder","server01.example.com"],["matInput","","formControlName","ipAddress","placeholder","192.168.1.100"],["appearance","outline",1,"half-width"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","port","placeholder","161"],["matInput","","formControlName","description","rows","3","placeholder","Description de l'asset..."],["formControlName","active"],["formControlName","snmpVersion"],["class","snmp-v2c-config",4,"ngIf"],["class","snmp-v3-config",4,"ngIf"],["class","global-error",4,"ngIf"],["align","end",1,"dialog-actions"],["mat-stroked-button","","type","button",1,"test-button",3,"click","disabled"],[4,"ngIf"],["diameter","20",4,"ngIf"],[1,"spacer"],["mat-button","","type","button",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],[1,"snmp-v2c-config"],["matInput","","formControlName","community","placeholder","public"],["matSuffix",""],[1,"snmp-v3-config"],["matInput","","formControlName","username","placeholder","admin"],["formControlName","authProtocol",3,"selectionChange"],["value",""],["appearance","outline","class","half-width",4,"ngIf"],["formControlName","privProtocol",3,"selectionChange"],["matInput","","type","password","formControlName","authPassword","placeholder","Mot de passe (min. 8 caract\xE8res)"],["matInput","","type","password","formControlName","privPassword","placeholder","Mot de passe (min. 8 caract\xE8res)"],[1,"global-error"],["diameter","20"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"h2",1),a(2),n(),i(3,"form",2),S("ngSubmit",function(){return o.onSubmit()}),i(4,"mat-dialog-content")(5,"mat-card",3)(6,"mat-card-header")(7,"mat-card-title"),a(8,"Identification"),n()(),i(9,"mat-card-content")(10,"div",4)(11,"mat-form-field",5)(12,"mat-label"),a(13,"Hostname"),n(),u(14,"input",6),i(15,"mat-error"),a(16),n()()(),i(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),a(20,"Adresse IP"),n(),u(21,"input",7),i(22,"mat-error"),a(23),n()()(),i(24,"div",4)(25,"mat-form-field",8)(26,"mat-label"),a(27,"Type d'Asset"),n(),i(28,"mat-select",9),d(29,$e,2,2,"mat-option",10),n(),i(30,"mat-error"),a(31),n()(),i(32,"mat-form-field",8)(33,"mat-label"),a(34,"Port SNMP"),n(),u(35,"input",11),i(36,"mat-error"),a(37),n()()(),i(38,"div",4)(39,"mat-form-field",5)(40,"mat-label"),a(41,"Description"),n(),u(42,"textarea",12),i(43,"mat-error"),a(44),n()()(),i(45,"div",4)(46,"mat-checkbox",13),a(47,"Asset actif"),n()()()(),i(48,"mat-card",3)(49,"mat-card-header")(50,"mat-card-title"),a(51,"Configuration SNMP"),n()(),i(52,"mat-card-content")(53,"div",4)(54,"mat-form-field",5)(55,"mat-label"),a(56,"Version SNMP"),n(),i(57,"mat-select",14),d(58,ze,2,2,"mat-option",10),n(),i(59,"mat-error"),a(60),n()()(),d(61,Be,10,1,"div",15)(62,Ge,32,7,"div",16),n()(),d(63,We,2,0,"mat-error",17),n(),i(64,"mat-dialog-actions",18)(65,"button",19),S("click",function(){return o.testConnection()}),d(66,Ze,2,0,"mat-icon",20)(67,Ye,1,0,"mat-spinner",21),a(68),n(),u(69,"div",22),i(70,"button",23),S("click",function(){return o.onCancel()}),a(71," Annuler "),n(),i(72,"button",24),d(73,Je,2,1,"mat-icon",20)(74,Ke,1,0,"mat-spinner",21),a(75),n()()()()),r&2&&(s(2),f(" ",o.isEditMode?"Modifier l'Asset SNMP":"Nouvel Asset SNMP"," "),s(),l("formGroup",o.assetForm),s(13),g(o.getErrorMessage("hostname")),s(7),g(o.getErrorMessage("ipAddress")),s(6),l("ngForOf",o.assetTypes),s(2),g(o.getErrorMessage("type")),s(6),g(o.getErrorMessage("port")),s(7),g(o.getErrorMessage("description")),s(14),l("ngForOf",o.snmpVersions),s(2),g(o.getErrorMessage("snmpVersion")),s(),l("ngIf",o.isSnmpV1OrV2C),s(),l("ngIf",o.isSnmpV3),s(),l("ngIf",(o.assetForm.errors==null?null:o.assetForm.errors.hostnameOrIpRequired)&&o.assetForm.touched),s(2),l("disabled",o.assetForm.invalid||o.isTestingConnection||o.isLoading),s(),l("ngIf",!o.isTestingConnection),s(),l("ngIf",o.isTestingConnection),s(),f(" ",o.isTestingConnection?"Test en cours...":"Tester la connexion"," "),s(2),l("disabled",o.isLoading),s(2),l("disabled",o.assetForm.invalid||o.isLoading),s(),l("ngIf",!o.isLoading),s(),l("ngIf",o.isLoading),s(),f(" ",o.isLoading?"Sauvegarde...":o.isEditMode?"Mettre \xE0 jour":"Cr\xE9er"," "))},dependencies:[q,k,Mt,vt,Et,Ct,bt,xt,St,y,E,v,b,M,C,Ht,$t,zt,Bt,Yt,jt,ct,le,R,oe,se,re],styles:[".asset-form-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.asset-form-container[_ngcontent-%COMP%]   .asset-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.asset-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.asset-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.asset-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#1976d2;font-weight:500;font-size:1.1rem}.asset-form-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;align-items:flex-start}.asset-form-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.asset-form-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.asset-form-container[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{flex:1}.asset-form-container[_ngcontent-%COMP%]   .snmp-v2c-config[_ngcontent-%COMP%], .asset-form-container[_ngcontent-%COMP%]   .snmp-v3-config[_ngcontent-%COMP%]{border-left:3px solid #4caf50;padding-left:1rem;margin-top:1rem;background-color:#f8f9fa;border-radius:4px;padding:1rem}.asset-form-container[_ngcontent-%COMP%]   .snmp-v3-config[_ngcontent-%COMP%]{border-left-color:#ff9800}.asset-form-container[_ngcontent-%COMP%]   .global-error[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;padding:.75rem;border-radius:4px;border-left:4px solid #f44336;margin:1rem 0;font-size:.875rem}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e0e0e0;margin-top:1rem}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .test-button[_ngcontent-%COMP%]{color:#4caf50;border-color:#4caf50}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .test-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4caf500a}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .test-button[disabled][_ngcontent-%COMP%]{opacity:.6}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5rem}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}@media (max-width: 768px){.asset-form-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.asset-form-container[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{width:100%}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .test-button[_ngcontent-%COMP%]{order:3;width:100%}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{display:none}.asset-form-container[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0;width:100%}}.asset-form-container[_ngcontent-%COMP%]   .snmp-v2c-config[_ngcontent-%COMP%], .asset-form-container[_ngcontent-%COMP%]   .snmp-v3-config[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.asset-form-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-icon[matSuffix][_ngcontent-%COMP%]{color:#666;font-size:1.2rem}.asset-form-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:.5rem}.asset-form-container[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:.5rem}.asset-form-container[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{font-weight:500}.asset-form-container[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{min-height:1.5rem}.asset-form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.asset-form-container[_ngcontent-%COMP%]   mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#f44336}.asset-form-container[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{font-size:.75rem;margin-top:.25rem}.asset-form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .asset-form-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:focus-within{outline:2px solid #1976d2;outline-offset:2px}.asset-form-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fffc;display:flex;align-items:center;justify-content:center;z-index:1000}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important}"]})}}return e})();function Qe(e,m){e&1&&(i(0,"div",6),u(1,"mat-spinner"),i(2,"p"),a(3,"Chargement des configurations..."),n()())}function Xe(e,m){e&1&&(i(0,"div",7)(1,"mat-icon"),a(2,"settings_off"),n(),i(3,"h3"),a(4,"Aucune configuration trouv\xE9e"),n(),i(5,"p"),a(6,"Commencez par cr\xE9er votre premi\xE8re configuration de scan SNMP"),n(),i(7,"button",2)(8,"mat-icon"),a(9,"add"),n(),a(10," Cr\xE9er une configuration "),n()())}function tn(e,m){if(e&1&&(i(0,"mat-card",10)(1,"mat-card-header")(2,"mat-card-title"),a(3),n(),i(4,"mat-card-subtitle"),a(5),n()(),i(6,"mat-card-content")(7,"p")(8,"strong"),a(9,"OIDs:"),n(),a(10),n(),i(11,"p")(12,"strong"),a(13,"Statut:"),n(),i(14,"mat-chip",11),a(15),n()()(),i(16,"mat-card-actions")(17,"button",12)(18,"mat-icon"),a(19,"edit"),n(),a(20," Modifier "),n(),i(21,"button",13)(22,"mat-icon"),a(23,"play_arrow"),n(),a(24," Lancer "),n()()()),e&2){let t=m.$implicit;s(3),g(t.name),s(2),f("Asset: ",t.asset.hostname||t.asset.ipAddress,""),s(5),f(" ",t.oids.length||0," configur\xE9s"),s(4),l("color",t.active?"primary":"warn"),s(),f(" ",t.active?"Actif":"Inactif"," ")}}function en(e,m){if(e&1&&(i(0,"div",8),d(1,tn,25,5,"mat-card",9),n()),e&2){let t=h();s(),l("ngForOf",t.configs)}}var he=(()=>{class e{constructor(t){this.snmpService=t,this.configs=[],this.loading=!1}ngOnInit(){this.loadConfigs()}loadConfigs(){this.loading=!0,this.snmpService.getAllConfigs().subscribe({next:t=>{this.configs=t,this.loading=!1},error:t=>{console.error("Erreur lors du chargement des configurations:",t),this.loading=!1}})}static{this.\u0275fac=function(r){return new(r||e)(x($))}}static{this.\u0275cmp=_({type:e,selectors:[["app-config-list"]],decls:16,vars:3,consts:[[1,"config-list-container"],[1,"header-actions"],["mat-raised-button","","color","primary","routerLink","/snmp/configs/new"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","configs-grid",4,"ngIf"],[1,"loading-container"],[1,"empty-state"],[1,"configs-grid"],["class","config-card",4,"ngFor","ngForOf"],[1,"config-card"],["selected","",3,"color"],["mat-button","","color","primary"],["mat-button","","color","accent"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),a(5,"settings"),n(),a(6," Configurations SNMP "),n(),i(7,"div",1)(8,"button",2)(9,"mat-icon"),a(10,"add"),n(),a(11," Nouvelle Configuration "),n()()(),i(12,"mat-card-content"),d(13,Qe,4,0,"div",3)(14,Xe,11,0,"div",4)(15,en,2,1,"div",5),n()()()),r&2&&(s(13),l("ngIf",o.loading),s(),l("ngIf",!o.loading&&o.configs.length===0),s(),l("ngIf",!o.loading&&o.configs.length>0))},dependencies:[q,k,N,y,E,v,gt,b,M,ut,C,G,R]})}}return e})();var tt=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=_({type:e,selectors:[["app-config-form"]],decls:14,vars:0,consts:[[1,"config-form-container"],["mat-raised-button","","routerLink","/snmp/configs"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),a(5,"settings"),n(),a(6," Formulaire Configuration SNMP "),n()(),i(7,"mat-card-content")(8,"p"),a(9,"Formulaire de cr\xE9ation/modification de configuration SNMP (\xE0 impl\xE9menter)"),n(),i(10,"button",1)(11,"mat-icon"),a(12,"arrow_back"),n(),a(13," Retour aux configurations "),n()()()())},dependencies:[N,y,E,v,b,M,C]})}}return e})();var _e=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=_({type:e,selectors:[["app-manual-scan"]],decls:14,vars:0,consts:[[1,"manual-scan-container"],["mat-raised-button","","color","primary"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),a(5,"play_circle"),n(),a(6," Scan Manuel SNMP "),n()(),i(7,"mat-card-content")(8,"p"),a(9,"Interface de lancement de scan manuel SNMP (\xE0 impl\xE9menter)"),n(),i(10,"button",1)(11,"mat-icon"),a(12,"play_arrow"),n(),a(13," Lancer un scan "),n()()()())},dependencies:[y,E,v,b,M,C]})}}return e})();var ve=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=_({type:e,selectors:[["app-scan-history"]],decls:19,vars:0,consts:[[1,"scan-history-container"],["color","primary","selected",""]],template:function(r,o){r&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),a(5,"history"),n(),a(6," Historique des Scans SNMP "),n()(),i(7,"mat-card-content")(8,"p"),a(9,"Historique et r\xE9sultats des scans SNMP (\xE0 impl\xE9menter)"),n(),i(10,"mat-chip-listbox")(11,"mat-chip-option",1),a(12,"Tous"),n(),i(13,"mat-chip-option"),a(14,"Succ\xE8s"),n(),i(15,"mat-chip-option"),a(16,"\xC9checs"),n(),i(17,"mat-chip-option"),a(18,"En cours"),n()()()()())},dependencies:[E,v,b,M,C,te,Xt]})}}return e})();var Ce=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=_({type:e,selectors:[["app-scan-detail"]],decls:14,vars:0,consts:[[1,"scan-detail-container"],["mat-raised-button","","routerLink","/snmp/results"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),a(5,"info"),n(),a(6," D\xE9tails du Scan SNMP "),n()(),i(7,"mat-card-content")(8,"p"),a(9,"D\xE9tails et r\xE9sultats d'un scan SNMP sp\xE9cifique (\xE0 impl\xE9menter)"),n(),i(10,"button",1)(11,"mat-icon"),a(12,"arrow_back"),n(),a(13," Retour \xE0 l'historique "),n()()()())},dependencies:[N,y,E,v,b,M,C]})}}return e})();var nn=[{path:"",component:fe},{path:"assets/new",component:X},{path:"assets/edit/:id",component:X},{path:"configs",component:he},{path:"configs/new",component:tt},{path:"configs/edit/:id",component:tt},{path:"run",component:_e},{path:"results",component:ve},{path:"results/:id",component:Ce}],be=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=V({imports:[Y.forChild(nn),Y]})}}return e})();var wi=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=V({imports:[ot,Pt,be,Nt,pt,Qt,ft,Ut,Jt,qt,ce,ee,de,ht,Zt,Rt,me,ne,Wt,Kt,lt]})}}return e})();export{wi as SnmpModule};
