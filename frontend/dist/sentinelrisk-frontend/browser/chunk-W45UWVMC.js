import{a as u,b as n}from"./chunk-U3ZZVWPS.js";import{a}from"./chunk-5UYJ4Z3S.js";import{R as i,U as o,Vb as k,f as c,n as l}from"./chunk-QYV7G3Z4.js";var y=(()=>{class t extends u{constructor(e,r){super(e,r),this.router=e,this.keycloak=r}isAccessAllowed(e,r){return c(this,null,function*(){if(!this.authenticated)return yield this.keycloak.login({redirectUri:window.location.origin+r.url}),!1;let s=e.data.roles;return!s||s.length===0?!0:s.some(g=>this.roles.includes(g))})}static{this.\u0275fac=function(r){return new(r||t)(o(k),o(n))}}static{this.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var U=(()=>{class t{constructor(e){this.keycloakAngular=e}init(){return this.keycloakAngular.init({config:{url:a.keycloakUrl,realm:a.keycloakRealm,clientId:a.keycloakClientId},initOptions:{onLoad:"check-sso",silentCheckSsoRedirectUri:window.location.origin+"/assets/silent-check-sso.html"}})}isLoggedIn(){return this.keycloakAngular.isLoggedIn()}login(){return this.keycloakAngular.login()}logout(){return this.keycloakAngular.logout(window.location.origin)}getUserProfile(){return l(this.keycloakAngular.loadUserProfile())}getToken(){return this.keycloakAngular.getToken()}updateToken(e=5){return l(this.keycloakAngular.updateToken(e))}getUserRoles(){return this.keycloakAngular.getUserRoles()}hasRole(e){return this.keycloakAngular.isUserInRole(e)}getUsername(){let e=this.keycloakAngular.getKeycloakInstance().tokenParsed;return e?e.preferred_username:void 0}static{this.\u0275fac=function(r){return new(r||t)(o(n))}}static{this.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{y as a,U as b};
