import{a as w,b as m}from"./chunk-W45UWVMC.js";import"./chunk-U3ZZVWPS.js";import{a as d,b as u,c as g,f,h as H}from"./chunk-YNSTEIOP.js";import{a as L,b as B}from"./chunk-JO4UO2GH.js";import"./chunk-5UYJ4Z3S.js";import{a as p,c as D}from"./chunk-R2HLJBYX.js";import{Aa as k,Ca as S,Eb as O,Gb as b,Jb as j,La as o,Ma as i,Na as _,S as y,Ua as l,Vb as T,Yb as C,Z as c,_ as x,cb as r,f as M,fb as E,oa as h,ob as P,pa as a,pb as I}from"./chunk-QYV7G3Z4.js";var N=(()=>{class t{constructor(e){this.keycloakService=e}login(){this.keycloakService.login()}static{this.\u0275fac=function(n){return new(n||t)(a(m))}}static{this.\u0275cmp=c({type:t,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,s){n&1&&(o(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),r(4,"Connexion \xE0 SentinelRisk"),i()(),o(5,"mat-card-content")(6,"button",1),l("click",function(){return s.login()}),r(7," Se connecter avec Keycloak "),i()()()())},dependencies:[d,g,f,u,p],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}mat-card[_ngcontent-%COMP%]{width:400px;text-align:center}button[_ngcontent-%COMP%]{margin-top:20px}"]})}}return t})();function G(t,R){if(t&1&&(o(0,"p"),r(1),i()),t&2){let e=R.ngIf;h(),E(" Bonjour ",e.firstName," ",e.lastName," ! ")}}var F=(()=>{class t{constructor(e){this.keycloakService=e,this.userProfile$=this.keycloakService.getUserProfile()}ngOnInit(){}logout(){this.keycloakService.logout()}static{this.\u0275fac=function(n){return new(n||t)(a(m))}}static{this.\u0275cmp=c({type:t,selectors:[["app-home"]],decls:12,vars:3,consts:[[1,"home-container"],[4,"ngIf"],["mat-raised-button","","color","warn",3,"click"]],template:function(n,s){n&1&&(o(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),r(4,"Bienvenue sur SentinelRisk"),i()(),o(5,"mat-card-content"),k(6,G,2,2,"p",1),P(7,"async"),o(8,"p"),r(9,"Vous \xEAtes connect\xE9 avec succ\xE8s."),i(),o(10,"button",2),l("click",function(){return s.logout()}),r(11," Se d\xE9connecter "),i()()()()),n&2&&(h(6),S("ngIf",I(7,1,s.userProfile$)))},dependencies:[O,d,g,f,u,p,b],styles:[".home-container[_ngcontent-%COMP%]{padding:20px}mat-card[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}button[_ngcontent-%COMP%]{margin-top:20px}"]})}}return t})();var K=(()=>{class t{constructor(e,n){this.keycloakService=e,this.router=n}ngOnInit(){this.logout()}logout(){return M(this,null,function*(){try{yield this.keycloakService.logout()}catch(e){console.error("Erreur lors de la d\xE9connexion:",e),this.router.navigate(["/auth/login"])}})}static{this.\u0275fac=function(n){return new(n||t)(a(m),a(T))}}static{this.\u0275cmp=c({type:t,selectors:[["app-logout"]],decls:7,vars:0,consts:[[1,"logout-container"],[1,"logout-message"],["mode","indeterminate","diameter","40"]],template:function(n,s){n&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),r(3,"D\xE9connexion en cours..."),i(),o(4,"p"),r(5,"Vous serez redirig\xE9 dans un instant."),i(),_(6,"mat-progress-spinner",2),i()())},dependencies:[L],styles:[".logout-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.logout-message[_ngcontent-%COMP%]{text-align:center}h2[_ngcontent-%COMP%]{margin-bottom:16px}mat-progress-spinner[_ngcontent-%COMP%]{margin:24px auto 0}"]})}}return t})();var U=[{path:"login",component:N},{path:"logout",component:K},{path:"home",component:F,canActivate:[w]},{path:"",redirectTo:"login",pathMatch:"full"}],st=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=x({type:t})}static{this.\u0275inj=y({imports:[j,C.forChild(U),H,D,B,C]})}}return t})();export{st as AuthModule};
